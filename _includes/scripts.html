<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/html2canvas.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/main.js" type="module"></script>
<script src="{{ site.baseurl }}/assets/js/libs/iframeResizer.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/resize.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/handleCopyClick.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    var languageSelector = document.getElementById("language");

    languageSelector.addEventListener("change", function () {
        var selectedLanguage = this.value;
        var baseUrl = window.location.origin;
        var jekyllBaseUrl = "{{ site.baseurl }}".replace(/\/$/, ""); // Asegura que no haya una barra al final
        var pathName = window.location.pathname.replace(jekyllBaseUrl, "").replace(/^\//, ""); // Elimina la barra inicial

        // Limpia el pathName para asegurarse de que no haya segmentos de idioma
        var newPathName = pathName.split('/').filter(function (segment) {
            return segment && segment !== "es" && segment !== "en";
        }).join('/');

        // Construye la nueva URL correctamente para cada idioma
        var newUrl = baseUrl + jekyllBaseUrl;
        if (selectedLanguage !== "en") { // Si el idioma seleccionado no es inglés, añade el segmento de idioma
            newUrl += (newPathName ? "/" : "") + newPathName;
        } else { // Para inglés, asegura que el segmento de idioma no se añada
            newUrl += "/en" + (newPathName ? "/" : "") + newPathName;
        }

        console.warn("newUrl", newUrl, "selectedLanguage", selectedLanguage);
        window.location.href = newUrl;
    });
});

    function closeLanguageSelector() {
        var languageSelector = document.getElementById("language");
        languageSelector.style.display = "none"; // Oculta el selector después de seleccionar una opción
    }

    // Cerrar el selector de idioma si se hace clic fuera de él
    document.addEventListener("click", function (event) {
        var languageSelector = document.getElementById("language");
        var languageImage = document.querySelector("#languageSelector img");

        if (
            event.target !== languageSelector &&
            event.target !== languageImage
        ) {
            // Si se hace clic fuera del selector
            languageSelector.style.display = "none";
        }
    });
</script>