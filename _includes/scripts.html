<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/html2canvas.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/main.js" type="module"></script>
<script src="{{ site.baseurl }}/assets/js/libs/iframeResizer.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/resize.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/handleCopyClick.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var languageSelector = document.getElementById("language");

        // Actualizar el prefijo del idioma seleccionado
        if (languageSelector.value === "es") {
            selectedLangSpan.textContent = "ES";
        } else if (languageSelector.value === "en") {
            selectedLangSpan.textContent = "EN";
        } else if (languageSelector.value === "pt") {
            selectedLangSpan.textContent = "PT";
        }


        languageSelector.addEventListener("change", function () {
            // si esta en español no le pega a nada /adm
            var selectedLanguage = this.value;
            var baseUrl = window.location.origin; // Obtiene la URL base actual (ej. http://127.0.0.1:4000 o la URL de producción)
            var jekyllBaseUrl = "{{ site.baseurl }}"; // Obtiene la URL base de Jekyll (ej. /aranda-docs)
            var newUrl = `${baseUrl}${jekyllBaseUrl}/${selectedLanguage}`;

            window.location.href = newUrl;
        });

        closeLanguageSelector();
    });

    function closeLanguageSelector() {
        var select = document.getElementById("language");
        var languageSelector = document.getElementById("languageSelector");
        var arrow = document.getElementById("arrow");

        select.style.display = "none";
        languageSelector.classList.remove("open");
        arrow.innerHTML = "&#9660;"; // Asegura que la flecha esté apuntando hacia abajo cuando se cierra
    }

    // Cerrar el selector de idioma si se hace clic fuera de él
    document.addEventListener("click", function (event) {
        var languageSelector = document.getElementById("language");
        var languageImage = document.querySelector("#languageSelector img");

        if (
            event.target !== languageSelector &&
            event.target !== languageImage
        ) {
            // Si se hace clic fuera del selector
            languageSelector.style.display = "none";
        }
    });
</script>