<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/html2canvas.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/jspdf.umd.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/main.js" type="module"></script>
<script src="{{ site.baseurl }}/assets/js/libs/iframeResizer.min.js"></script>
<script src="{{ site.baseurl }}/assets/js/resize.js"></script>
<script src="{{ site.baseurl }}/assets/js/modules/handleCopyClick.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    var languageSelector = document.getElementById("language");

    languageSelector.addEventListener("change", function () {
        var selectedLanguage = this.value;
        var baseUrl = window.location.origin; // Obtiene la URL base actual
        var jekyllBaseUrl = "{{ site.baseurl }}"; // Obtiene la URL base de Jekyll

        // Remueve el segmento de idioma existente de la URL (asumiendo que está al final)
        var languageRegex = /\/(en|es|pt)$/; // Añade o quita códigos de idioma según sea necesario
        var cleanBaseUrl = jekyllBaseUrl.replace(languageRegex, '');

        // Construye la URL dependiendo del idioma seleccionado
        var newUrl;
        if (selectedLanguage === 'es') {
            newUrl = `${baseUrl}${cleanBaseUrl}`;
        } else {
            newUrl = `${baseUrl}${cleanBaseUrl}/${selectedLanguage}`;
        }

        window.location.href = newUrl;
    });

    closeLanguageSelector();
});

    function closeLanguageSelector() {
        var languageSelector = document.getElementById("language");
        languageSelector.style.display = "none"; // Oculta el selector después de seleccionar una opción
    }

    // Cerrar el selector de idioma si se hace clic fuera de él
    document.addEventListener("click", function (event) {
        var languageSelector = document.getElementById("language");
        var languageImage = document.querySelector("#languageSelector img");

        if (
            event.target !== languageSelector &&
            event.target !== languageImage
        ) {
            // Si se hace clic fuera del selector
            languageSelector.style.display = "none";
        }
    });
</script>
