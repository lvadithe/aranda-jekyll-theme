<!DOCTYPE html>
<html id="sg" {% if site.language %} lang="{{ site.language }}" {% endif %}>
    <head>
        {% include header.html %}
        <style>
            #languageSelector img {
                transition: box-shadow 0.3s; /* Agrega una transición suave */
                border-radius: 50%;
            }

            #languageSelector img:hover {
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            }
        </style>
    </head>

    <body id="sg">
        <div class="sg-pusher" style="display: flex">
            <aside id="sidebar">{% include sidebar.html %}</aside>
            <main
                id="sgMain"
                class="sg-main"
                style="
                    display: flex;
                    flex-direction: column;
                    flex-grow: 1;
                    padding: 20px;
                    margin-left: 285px; /* Asegúrate de que coincida con el ancho del sidebar */
                "
            >
                <div
                    id="languageSelector"
                    style="
                        position: absolute;
                        right: 45px;
                        top: 20px;
                        display: flex;
                        flex-direction: column;
                        align-items: flex-end;
                    "
                >
                    <p>
                        {{ site.baseurl }} ---------------------------- {%
                        assign params = page.url | split: '/' %} {% assign lang
                        = params[1] %} {% if lang == null or lang == "" %} {%
                        assign lang = "es" %} {% endif %}
                        ------------------------------- {{ lang }}
                    </p>
                    <img
                        src="{{ site.baseurl }}/assets/images/ic_language.svg"
                        alt=""
                        onclick="toggleLanguageSelector()"
                        style="cursor: pointer; height: 30px; width: 30px"
                    />
                    <select
                        id="language"
                        style="
                            padding: 3px;
                            margin-top: 10px;
                            border: 1px solid #000;
                            border-radius: 5px;
                            cursor: pointer;
                        "
                    >
                        <option value="es">Español</option>
                        <option value="en">Inglés</option>
                        <option value="pt">Portugués</option>
                        <!-- Agrega más opciones según tus necesidades -->
                    </select>
                </div>

                <div
                    style="
                        flex-grow: 1;
                        box-sizing: border-box;
                        overflow-y: auto;
                    "
                >
                    {{ content }}
                </div>

                <!-- {% include footer.html %} -->
            </main>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var languageSelector = document.getElementById("language");
                var currentLanguage = "{{ lang }}"; // Obtiene el idioma actual del sitio desde la lógica de Jekyll

                console.log("Idioma actual:", currentLanguage);

                // Establece el valor del selector de idioma según el idioma actual del sitio
                if (currentLanguage) {
                    languageSelector.value = currentLanguage;
                }

                languageSelector.addEventListener("change", function () {
                    var selectedLanguage = this.value;
                    var baseUrl = window.location.origin; // Obtiene la URL base actual (ej. http://127.0.0.1:4000 o la URL de producción)
                    var jekyllBaseUrl = "{{ site.baseurl }}"; // Obtiene la URL base de Jekyll (ej. /aranda-docs)
                    var newUrl = `${baseUrl}${jekyllBaseUrl}/${selectedLanguage}/`;

                    console.log(
                        "Idioma seleccionado:",
                        selectedLanguage,
                        "URL nueva:",
                        newUrl
                    );
                    window.location.href = newUrl;
                });
            });

            function toggleLanguageSelector() {
                var languageSelector = document.getElementById("language");
                languageSelector.style.display =
                    languageSelector.style.display === "none" ||
                    languageSelector.style.display === ""
                        ? "inline-block"
                        : "none";
            }
        </script>
        {% include scripts.html %}
    </body>
</html>
